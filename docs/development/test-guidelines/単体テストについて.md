---
sidebar_position: 2
---

# 単体テストについて

## 目的
コードベースでの動作確認
* 実装したコードが落ちないか?
  * ラインカバレッジを見る
* 入力に対して出力が合っているか?
* バグや考慮漏れを発見する。
  * 単体テストを書きやすいコードを実装するように意識する。
    * コード自体が簡潔になる、読みやすくなる。
* どうしてもテスト実装が無理なら、ブレイクポイントを打って、1行ずつ確認する。

## エビデンス
* カバレッジ計測レポート

## 実施時期
* featureブランチで実施
* developブランチでも定期的に実施(自動化したいなあ)

### 単体テストの注意点
* テストは製品ではないので、実装したものによっては最悪いつか通せればよい。
* **テスト実装が目的にならないよう**に工数など調整する。
  * （チームごとに感覚が異なるため、上長に要確認）
* C#では、
  * xUnit, Moqを利用する
* JavaScriptは、どうするか検討中
  * 主にViewで利用しているため、テストが難しい

### コードカバレッジについて
* コード単体テストの実装目標をラインカバレッジ100%とする。(どうしても通せない箇所等あるため、その場合は仕方ない。)
  * テスト実装が目的化しない範囲で頑張る
    * 慣れていない場合、実装工数がかなり多くなるので注意が必要
* 対象範囲
  * Model, Service, ViewModel等のビジネスロジック(Viewは対象外)
  * publicな関数、変数、クラスをテストする。
  * アクセス修飾子が問題でラインを通せないものがあるが、以下の二つの場合しかない。
    * 不要なもの
      * 製品版からは消す(masterに入らないようにする)
    * フレームワークから利用するもの
      * コメントを書いて残す
      * チーム内に周知する
    * フレームワークを実装した場合
      * チームに周知する