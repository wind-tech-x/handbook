---
sidebar_position: 6
---

# コードレビューでの対立
コードレビューに対して、開発者が対立する場合がある。
たとえば、あなたの提案に反対したり、全体的に「厳しすぎる」と文句を言うことがある。

## 誰が正しいのか？
開発者があなたの提案に反対した場合、まずは彼らの指摘が正しくないか検討することが大事。
多くの場合、開発者はレビュアーよりコードに近い立場にいるため、何らかの鋭い洞察を持っているかもしれない。
彼らの意見に筋が通っているか、コードの健全性という観点から見て妥当かを考えてみる。
もしそうであれば、「なるほど、あなたの言うとおりですね」と伝えて、その問題点の指摘は取り下げて構わない。

しかし、開発者の見解が正しくない場合もある。
その場合、レビュアーは自分の提案が正しいと考える理由をもう少し詳しく説明しよう。
優れた説明とは、開発者の言い分を理解していることを示しつつ、変更を求める追加の理由を提示するものである。

特に、レビュアーが「この変更がコードの健全性を高める」と考える場合は、その作業コストに見合う価値があると判断する限り、変更を提案し続ける。
コードの健全性は少しずつ改善していくものである。

場合によっては、提案の真意が開発者に伝わるまでに、何度か説明が必要かもしれない。
ただし、常に礼儀正しく対応し、「開発者の意見を聞いてはいるが、同意できない」という立場を明確に伝えよう。

## 開発者を不快にさせることについて
レビュアーの中には、「自分が修正を強く要求すると、開発者を不快にさせるのでは」と心配する人もいるだろう。
実際に開発者が一時的に不満を持つこともあるが、ほとんどの場合はすぐに収まり、むしろ後になって「コード品質向上に貢献してくれてありがとう」と感謝されることも多い。
通常、コメントの書き方に気をつけて礼儀正しくやり取りすれば、開発者が不満を感じることはあまりない。
多くの場合、「不満」は厳しさそのものというより、コメントの書き方が原因となりやすい。

## 後で修正する、という話が出た場合
開発者は「早く作業を終わらせたい」という理由から、レビューで指摘された問題を「後のCLで直すから、いまは LGTM を出してほしい」と言うことがある。
中には、CLをマージした直後にすぐ修正を出す開発者もいますが、経験上、時間が経てば経つほど修正は行われなくなるのが現実。
これは開発者が無責任だからではなく、他の作業に追われて修正の優先度が下がり、忘れられてしまうからである。

したがって、緊急時でない限り、新たな複雑さを導入する CL は、マージ前にきちんと修正してもらうのが原則となる。
周辺のコードに元々存在していた問題をこのタイミングで修正できないのであれば、開発者にバグ登録やTODOコメントの追加などを行わせて、後で確実に対応できるようにして貰おう。

「後で直します」と言って先に進めることを許すと、コードベースの品質は徐々に低下していく。

## 「厳しすぎる」という一般的な不満
以前はコードレビューが比較的ゆるかったのに、急に厳しくなると、一部の開発者は大きく反発するかもしれない。
こうした不満は、コードレビューを素早く返すようにすると多くの場合、自然に収まっていく。

それでも収まるまでに数か月かかることもある。
しかし、開発者たちはそのうち、「厳格なコードレビュー」によって素晴らしい品質のコードが生まれることを実感するようになる。
かつて強く抗議していた人が、後になって「厳しいレビューがいかに価値を生んでいるか」を理解し、最も熱心な支持者に変わるケースもよくある。

## コンフリクトの解決
ここで述べたすべてのことを実行しても、なお開発者とのあいだで対立が解消しない場合は、「[コードレビュー標準](./standard-of-review)」にあるガイドラインと原則を参照してください。そこには、コンフリクトを解消する方法が詳しく書かれています。